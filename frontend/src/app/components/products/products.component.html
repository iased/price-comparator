<div class="page">

  <div class="store-switcher">
    <button *ngFor="let s of stores" (click)="selectStore(s)" [class.active]="s === selectedStore">{{ s }}</button>
  </div>

  <div *ngIf="loading" class="state">Loading products…</div>
  <div *ngIf="error" class="state error">{{ error }}</div>

  <div class="products-grid" *ngIf="!loading && !error">
    <div class="product-card" *ngFor="let p of products">

      <!-- left thumb -->
      <div class="card-thumb">
        <div class="thumb-placeholder">
          {{ (p.product?.name || '?')[0] | uppercase }}
        </div>
      </div>

      <!-- right main -->
      <div class="card-main">

        <div class="card-header">
          <div class="card-name">{{ p.product?.name | titlecase }}</div>
          <div class="card-meta">{{ p.product?.brand | titlecase }} · {{ p.product?.quantity }}{{ p.product?.unit }}</div>
        </div>

        <div class="card-price-block">
          <div class="card-price">
            {{ p.price | number:'1.2-2' }} {{ p.currency }}
          </div>
        </div>

        <div class="card-footer">
          <div class="card-store">
            {{ p.supermarket?.name }}
          </div>
          <div class="card-date">
            Seen on {{ p.priceDate }}
          </div>
        </div>

      </div>

    </div>
  </div>
</div>
