<header class="header">
  <div class="header-container">

    <div class="top-row">
      <a routerLink="/products" class="brand">
        ðŸ›’ <span>Compareo</span>
      </a>

      <div class="actions">
        <button
          class="btn btn-ghost btn-icon"
          type="button"
          (click)="goToList()"
          title="ListÄƒ de cumpÄƒrÄƒturi"
          aria-label="ListÄƒ de cumpÄƒrÄƒturi"
        >
          ðŸ“‹
        </button>

        <div class="user-menu" tabindex="0">
          <button class="btn btn-ghost btn-icon user-trigger" type="button" aria-label="Cont">
            <span class="icon">ðŸ‘¤</span>
          </button>

          <div class="user-dropdown">
            <ng-container *ngIf="!auth.isLoggedIn(); else loggedInMenu">
              <button class="drop-item" type="button" (click)="goToLogin()">IntrÄƒ Ã®n cont</button>
              <button class="drop-item" type="button" (click)="goToRegister()">Cont nou</button>
            </ng-container>

            <ng-template #loggedInMenu>
              <div class="drop-label">
                Conectat ca
                <div class="drop-user">{{ auth.getUserNameOrEmail() }}</div>
              </div>

              <a
                class="drop-item link"
                routerLink="/account"
              >
                Contul meu
              </a>

              <button class="drop-item danger" type="button" (click)="logout()">Logout</button>
            </ng-template>
          </div>
        </div>
      </div>

    </div>

    <div class="header-filters">
      <div class="search-wrapper">
        <span class="search-icon">ðŸ”Ž</span>
        <input
          #searchBox
          class="search-input"
          type="text"
          placeholder="CautÄƒ produse dupÄƒ nume sau brand..."
          [value]="currentQ"
          (keydown.enter)="onSearchEnter(searchBox.value)"
        />
      </div>

      <div class="category-menu" [class.open]="categoryOpen">
        <button 
          class="category-trigger" 
          type="button" 
          aria-label="Categorie"
          (click)="toggleCategory($event)">
            <span class="category-text">{{ selectedCategoryLabel }}</span>
            <span class="chev" aria-hidden="true"></span>
        </button>

        <div class="category-dropdown">
          <button class="drop-item" type="button" (click)="pickCategory(null)">
            Toate categoriile
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('alimente de bazÄƒ')">
            Alimente de bazÄƒ
          </button>
            <button class="drop-item" type="button" (click)="pickCategory('bÄƒuturi')">
            BÄƒuturi
          </button>
            <button class="drop-item" type="button" (click)="pickCategory('bÄƒuturi alcoolice')">
            BÄƒuturi alcoolice
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('dulciuri')">
            Dulciuri
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('igienÄƒ')">
            IgienÄƒ
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('lactate')">
            Lactate
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('legume È™i fructe')">
            Legume È™i fructe
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('panificaÈ›ie')">
            PanificaÈ›ie
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('petshop')">
            Petshop
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('snacks')">
            Snacks
          </button>
          <button class="drop-item" type="button" (click)="pickCategory('sosuri')">
            Sosuri
          </button>
        </div>
      </div>

      <div class="store-menu" [class.open]="storeOpen">
        <button 
          class="store-trigger" 
          type="button" 
          aria-label="Magazin"
          (click)="toggleStore($event)">
            <span class="store-text">{{ selectedStoreLabel }}</span>
            <span class="chev" aria-hidden="true"></span>
        </button>

        <div class="store-dropdown">
          <button class="drop-item" type="button" (click)="pickStore(null)">
            Toate magazinele
          </button>
          <button class="drop-item" type="button" (click)="pickStore(1)">
            Lidl
          </button>
          <button class="drop-item" type="button" (click)="pickStore(2)">
            Profi
          </button>
          <button class="drop-item" type="button" (click)="pickStore(3)">
            Kaufland
          </button>
        </div>
      </div>

    </div>

  </div>
</header>
